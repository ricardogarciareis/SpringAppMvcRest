<!DOCTYPE html>
<html lang='pt-PT' xmlns:th="http://www.thymeleaf.org">
	<head>
		<meta charset="UTF-8">
		<title>Lista de Livros</title>
		<link rel="icon" type="image/x-icon" href="https://www.w3schools.com/favicon.ico">
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
		<script>
			function filteringNomes() {
			  // Declare variables
			  var input, filter, table, tr, td, i, txtValue;
			  input = document.getElementById("nome");
			  filter = input.value.toUpperCase();
			  table = document.getElementById("tabela");
			  tr = table.getElementsByTagName("tr");
			
			  // Loop through all table rows, and hide those who don't match the search query
			  for (i = 0; i < tr.length; i++) {
			    td = tr[i].getElementsByTagName("td")[1];
			    if (td) {
			      txtValue = td.textContent || td.innerText;
			      if (txtValue.toUpperCase().indexOf(filter) > -1) {
			        tr[i].style.display = "";
			      } else {
			        tr[i].style.display = "none";
			      }
			    }
			  }
			}
			
			function filteringAutores() {
			  // Declare variables
			  var input, filter, table, tr, td, i, txtValue;
			  input = document.getElementById("autor");
			  filter = input.value.toUpperCase();
			  table = document.getElementById("tabela");
			  tr = table.getElementsByTagName("tr");
			
			  // Loop through all table rows, and hide those who don't match the search query
			  for (i = 0; i < tr.length; i++) {
			    td = tr[i].getElementsByTagName("td")[2];
			    if (td) {
			      txtValue = td.textContent || td.innerText;
			      if (txtValue.toUpperCase().indexOf(filter) > -1) {
			        tr[i].style.display = "";
			      } else {
			        tr[i].style.display = "none";
			      }
			    }
			  }
			}
		</script>
	</head>
	<body data-bs-theme="dark">
		<main class="container-xl text-center p-2">	
			<form action="#" th:action="@{/mvc/book/new}" method="post">
				
				<div class="col-12 rounded-2 pt-3 pb-2 border border-3">
			      	<h3>LISTA DE LIVROS</h3>
			    </div>
			    <div class="col-12 text-start mb-3">
		    		<a style="font-size: 9pt;" href="https://dzrrcreations.ddns.net/index.html">Portal DZRRCREATIONS</a>
		    		<small class="" style="display: inline;"> - </small>
					<small th:text="${env}" style="display: inline;"></small>
				</div>
				
				<div class="row mt-3 mb-3">	
					<div class="col-12 col-xs-12 col-sm-12 col-md-5 col-lg-5">
						<div class="mb-3">
						  	<input type="text" class="form-control" id="title" placeholder="Nome" name="title">
						</div>
					</div>
					<div class="col-12 col-xs-12 col-sm-12 col-md-5 col-lg-5">
						<div class="mb-3">
						  	<input type="text" class="form-control" id="author" placeholder="Autor(es)" name="author">
						</div>
					</div>
					<div class="col-12 col-xs-12 col-sm-12 col-md-2 col-lg-2">
						<button type="submit" class="btn btn-primary w-100">Adicionar</button>
					</div>
				</div>
			</form>
			
			<hr>
						
			<div class="row">
				<div class="col-12 col-xs-12 col-sm-12 col-md-5 col-lg-5">
					<input type="text" class="form-control mb-2" id="nome" onkeyup="filteringNomes()" placeholder="Procurar nomes...">
				</div>
			    <div class="col-12 col-xs-12 col-sm-12 col-md-5 col-lg-5">
			    	<input type="text" class="form-control mb-2" id="autor" onkeyup="filteringAutores()" placeholder="Procurar autores...">
			    </div>
			    
			</div>		
						
 			<div class="row">
 				<div class="col-12">
 					<table class="table table-sm table-hover table-striped" id="tabela">
						<thead>
							<tr>
						      	<th scope="col" style="width:10%">#</th>
						      	<th class="text-start" scope="col" style="width:35%">Nome</th>
						      	<th class="text-start" scope="col" style="width:35%">Autor(es)</th>
						      	<th scope="col" style="width:20%">Ações</th>
						    </tr>
						</thead>
						<tbody>
							<tr th:each="book: ${books}">
								<td th:text="${book.id}" />
							    <td class="text-start" th:text="${book.title}" />
							    <td class="text-start" th:text="${book.author}" />
							    <td>
							    	<a class="m-3" th:href="@{/mvc/book/update/{id}(id=${book.id})}">Alterar</a>
            						<a th:href="@{/mvc/book/delete/{id}(id=${book.id})}">Eliminar</a>
							    </td>
							</tr>
						</tbody>
					</table>
 				</div>
 			</div>		
 		</main>
	</body>
</html>